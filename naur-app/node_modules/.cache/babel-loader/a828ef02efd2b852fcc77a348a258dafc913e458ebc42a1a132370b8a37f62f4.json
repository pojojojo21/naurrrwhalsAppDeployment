{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pojoj\\\\Documents\\\\CIS350APP\\\\naurrrwhalsAppDeployment\\\\naur-app\\\\src\\\\components\\\\Login.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react/forbid-prop-types */\n/* eslint-disable react/jsx-filename-extension */\n/* eslint-disable react/react-in-jsx-scope */\n\nimport React, { useState, useRef } from 'react';\nimport { postLogin } from '../modules/loginApi';\nimport RegLock from './regLock';\nimport '../assets/Login.css';\n\n// Returns error if the given string is not a valid username\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction usernameError(str) {\n  if (!str.match(/^[A-Za-z0-9_]*$/)) {\n    return 'Username must be made up of letters, numbers, or underscores';\n  }\n  if (!str.match(/^[A-Za-z_][A-Za-z0-9_]*$/)) {\n    return 'Username must start with a letter or underscore';\n  }\n  if (!str.match(/[A-Za-z0-9]/)) {\n    return 'Username must contain contain at least one letter or number';\n  }\n  if (!(str.length >= 3)) {\n    return 'Username must be at least 3 characters long';\n  }\n  return '';\n}\n\n// Returns error if the given string is not a valid password\nfunction passwordError(str) {\n  if (!str.match(/^[A-Za-z0-9\\\\!\"#$%&'()*+,\\-./:;<=>?@[\\]^_`{|}~]+$/)) {\n    return 'Password contains illegal character';\n  }\n  if (!(str.length >= 6)) {\n    return 'Password must be at least 6 characters long';\n  }\n  return '';\n}\n\n// Input: a state setter used to set the username of the current user and reload\nfunction Login(_ref) {\n  _s();\n  let {\n    setUsername,\n    setNewUserState\n  } = _ref;\n  const [errorMessage, setErrorMessage] = useState('');\n  const [lockout, setLockout] = useState(false);\n  const lockoutname = useRef('');\n  function handleUsernameInput(e) {\n    const name = e.target.value;\n    if (name === '') {\n      setErrorMessage('');\n    } else {\n      setErrorMessage(usernameError(name));\n    }\n  }\n  function handlePasswordInput(e) {\n    const pword = e.target.value;\n    if (pword === '') {\n      setErrorMessage('');\n    } else {\n      setErrorMessage(passwordError(pword));\n    }\n  }\n  function handleLogin(e) {\n    e.preventDefault();\n    const name = document.getElementById('username').value;\n    const pword = document.getElementById('password').value;\n    const nameErr = usernameError(name);\n    const pwordErr = passwordError(pword);\n    if (nameErr) {\n      setErrorMessage(nameErr);\n      return;\n    }\n    if (pwordErr) {\n      setErrorMessage(pwordErr);\n      return;\n    }\n    (async function handleLoginAsync() {\n      const status = await postLogin(name, pword);\n      lockoutname.current = name;\n      if (status === 401) {\n        setErrorMessage('Password is incorrect');\n        return;\n      }\n      if (status === 403) {\n        setErrorMessage('');\n        setLockout(true);\n        return;\n      }\n      if (status === 404) {\n        setErrorMessage('User does not exist');\n        return;\n      }\n      if (status < 200 || status >= 300) {\n        setErrorMessage('An unknown error occured');\n        return;\n      }\n      // eslint-disable-next-line no-param-reassign\n      setNewUserState(false);\n      setUsername(name);\n    })();\n    // after successful login, reset error count to zero\n    // errCount.current = 0;\n  }\n\n  function handleRegister() {\n    setNewUserState(true);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"regLoginWrapper\",\n    children: [lockout && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"regLock\",\n      children: /*#__PURE__*/_jsxDEV(RegLock, {\n        setLockout: setLockout,\n        username: lockoutname.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), !lockout && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loginWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loginWelcome\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Breathe,\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"work,\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"play,\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"sleep,\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"repeat.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loginInputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lMessage\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"stay well & get productive, all in one place\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: [\"\\xA0\", errorMessage]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleLogin,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"lInputs\",\n            type: \"text\",\n            id: \"username\",\n            placeholder: \"username\",\n            onChange: handleUsernameInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"lInputs\",\n            type: \"password\",\n            id: \"password\",\n            placeholder: \"password\",\n            onChange: handlePasswordInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"lButtons\",\n          type: \"submit\",\n          onClick: handleLogin,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"lButtons\",\n          type: \"submit\",\n          onClick: handleRegister,\n          children: \"Create Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"iSTTLcBa3l4pfCITnSUl8JZIWJ0=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useRef","postLogin","RegLock","usernameError","str","match","length","passwordError","Login","setUsername","setNewUserState","errorMessage","setErrorMessage","lockout","setLockout","lockoutname","handleUsernameInput","e","name","target","value","handlePasswordInput","pword","handleLogin","preventDefault","document","getElementById","nameErr","pwordErr","handleLoginAsync","status","current","handleRegister"],"sources":["C:/Users/pojoj/Documents/CIS350APP/naurrrwhalsAppDeployment/naur-app/src/components/Login.js"],"sourcesContent":["/* eslint-disable react/forbid-prop-types */\r\n/* eslint-disable react/jsx-filename-extension */\r\n/* eslint-disable react/react-in-jsx-scope */\r\n\r\nimport React, { useState, useRef } from 'react';\r\n\r\nimport { postLogin } from '../modules/loginApi';\r\nimport RegLock from './regLock';\r\nimport '../assets/Login.css';\r\n\r\n// Returns error if the given string is not a valid username\r\nfunction usernameError(str) {\r\n  if (!str.match(/^[A-Za-z0-9_]*$/)) {\r\n    return 'Username must be made up of letters, numbers, or underscores';\r\n  }\r\n  if (!str.match(/^[A-Za-z_][A-Za-z0-9_]*$/)) {\r\n    return 'Username must start with a letter or underscore';\r\n  }\r\n  if (!str.match(/[A-Za-z0-9]/)) {\r\n    return 'Username must contain contain at least one letter or number';\r\n  }\r\n  if (!(str.length >= 3)) {\r\n    return 'Username must be at least 3 characters long';\r\n  }\r\n  return '';\r\n}\r\n\r\n// Returns error if the given string is not a valid password\r\nfunction passwordError(str) {\r\n  if (!str.match(/^[A-Za-z0-9\\\\!\"#$%&'()*+,\\-./:;<=>?@[\\]^_`{|}~]+$/)) {\r\n    return 'Password contains illegal character';\r\n  }\r\n  if (!(str.length >= 6)) {\r\n    return 'Password must be at least 6 characters long';\r\n  }\r\n  return '';\r\n}\r\n\r\n// Input: a state setter used to set the username of the current user and reload\r\nfunction Login({ setUsername, setNewUserState }) {\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [lockout, setLockout] = useState(false);\r\n  const lockoutname = useRef('');\r\n\r\n  function handleUsernameInput(e) {\r\n    const name = e.target.value;\r\n    if (name === '') {\r\n      setErrorMessage('');\r\n    } else {\r\n      setErrorMessage(usernameError(name));\r\n    }\r\n  }\r\n\r\n  function handlePasswordInput(e) {\r\n    const pword = e.target.value;\r\n    if (pword === '') {\r\n      setErrorMessage('');\r\n    } else {\r\n      setErrorMessage(passwordError(pword));\r\n    }\r\n  }\r\n\r\n  function handleLogin(e) {\r\n    e.preventDefault();\r\n    const name = document.getElementById('username').value;\r\n    const pword = document.getElementById('password').value;\r\n    const nameErr = usernameError(name);\r\n    const pwordErr = passwordError(pword);\r\n    if (nameErr) {\r\n      setErrorMessage(nameErr);\r\n      return;\r\n    }\r\n    if (pwordErr) {\r\n      setErrorMessage(pwordErr);\r\n      return;\r\n    }\r\n\r\n    (async function handleLoginAsync() {\r\n      const status = await postLogin(name, pword);\r\n      lockoutname.current = name;\r\n      if (status === 401) {\r\n        setErrorMessage('Password is incorrect');\r\n        return;\r\n      }\r\n      if (status === 403) {\r\n        setErrorMessage('');\r\n        setLockout(true);\r\n        return;\r\n      }\r\n      if (status === 404) {\r\n        setErrorMessage('User does not exist');\r\n        return;\r\n      }\r\n      if ((status < 200) || (status >= 300)) {\r\n        setErrorMessage('An unknown error occured');\r\n        return;\r\n      }\r\n      // eslint-disable-next-line no-param-reassign\r\n      setNewUserState(false);\r\n      setUsername(name);\r\n    }());\r\n    // after successful login, reset error count to zero\r\n    // errCount.current = 0;\r\n  }\r\n\r\n  function handleRegister() {\r\n    setNewUserState(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"regLoginWrapper\">\r\n      {lockout && (\r\n        <div className=\"regLock\">\r\n          <RegLock setLockout={setLockout} username={lockoutname.current} />\r\n        </div>\r\n      )}\r\n      {!lockout && (\r\n        <div className=\"loginWrapper\">\r\n          <div className=\"loginWelcome\">\r\n            <h1>\r\n              Breathe,\r\n            </h1>\r\n            <h1>\r\n              work,\r\n            </h1>\r\n            <h1>\r\n              play,\r\n            </h1>\r\n            <h1>\r\n              sleep,\r\n            </h1>\r\n            <h1>\r\n              repeat.\r\n            </h1>\r\n          </div>\r\n          <div className=\"loginInputs\">\r\n            <div className=\"lMessage\">\r\n              <p>\r\n                stay well & get productive, all in one place\r\n              </p>\r\n            </div>\r\n            <div className=\"error\">\r\n          &nbsp;\r\n              {errorMessage}\r\n            </div>\r\n            <form onSubmit={handleLogin}>\r\n              <input className=\"lInputs\" type=\"text\" id=\"username\" placeholder=\"username\" onChange={handleUsernameInput} />\r\n              <br />\r\n              <input className=\"lInputs\" type=\"password\" id=\"password\" placeholder=\"password\" onChange={handlePasswordInput} />\r\n            </form>\r\n            <button className=\"lButtons\" type=\"submit\" onClick={handleLogin}>Login</button>\r\n            <button className=\"lButtons\" type=\"submit\" onClick={handleRegister}>Create Account</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}